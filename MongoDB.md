MongoDB is open-source NoSQL document database. It stores data in flexible JSON-like documents rather than tables with a fixed schema like SQL databases. 

**Advantages**
- easy to store and query large volumes of unstructured data.
- flexible data schema
- highly scalable horizontally using sharding
- indexing, in-memory cache for faster query
- replica sets provide automatic failover and data redundancy.
- supports dynamic queries against documents using a document-based query language. 

**Document** - basic unit of data in MongoDB. Similar to a row in an RDBMS table. Documents are stored in JSON-like (BSON) format with field-value pairs.  

**Collection** - A group of documents, similar to a table in RDBMS.
    
**Database** - A physical container for collections. Each MongoDB server typically has multiple databases.

MongoDB supports a wide variety of data types for fields in documents:
- **String** - UTF-8 encoded string for storing text `{ name: "John Doe" }`
- **Integer** - Used for numeric values
- **Boolean** - Stores true/false values.
- **Double** - 64-bit floating point value for decimals.
- **Arrays** - Stores lists of values in a single key.
- **Embedded Documents** - Stores documents inside other documents.
    `{ address: { street: "123 Main St", city: "New York" } }
- **Object IDs** - Special datatype used for document IDs, IDs are autogenerated untill explicitly defined.
    `{ _id: ObjectId() }`
- **Dates** - Date and time stored as milliseconds since Unix epoch.
    `{ createdAt: new Date() }`
- **Null** - Represents missing or unknown data
    `{ middleName: null }`


To insert a document into a collection:  

```js
db.users.insertOne({ name: "John", age: 30 })

db.users.insertMany([ {name: "John", age: 30}, {name: "Jane", age: 27}])
```

To query a *collection*, use `find()` : 

```js
db.users.find({}) // returns all documents
db.users.find({age: {$gte: 18, $lt : 66}})

//COMPARISON OPS
$eq $ne $gt $gte $lt $lte 
$in $nin //match 1 / none of array values

//LOGICAL OPS
//joins query clauses with logical and/or/nor/or and return doc that satisfy
db.example.find({
   $and: [{ qty: { $ne: 0 } }, { instock: {$eq : true} }]
})

//ELEMENT OPS
db.spices.find( { saffron: { $exists: true } } )
db.papers.find( { colors: { $type: "array" } } ) //if field of specified type

//EVALUATION OPS

```


|Name|Description|
|---|---|
|[`$exists`](https://www.mongodb.com/docs/manual/reference/operator/query/exists/#mongodb-query-op.-exists)|Matches documents that have the specified field.|
|[`$type`](https://www.mongodb.com/docs/manual/reference/operator/query/type/#mongodb-query-op.-type)|Selects documents if a field is of the specified type.|

### Evaluation[](https://www.mongodb.com/docs/manual/reference/operator/query/#evaluation "Permalink to this heading")

|Name|Description|
|---|---|
|[`$expr`](https://www.mongodb.com/docs/manual/reference/operator/query/expr/#mongodb-query-op.-expr)|Allows use of aggregation expressions within the query language.|
|[`$jsonSchema`](https://www.mongodb.com/docs/manual/reference/operator/query/jsonSchema/#mongodb-query-op.-jsonSchema)|Validate documents against the given JSON Schema.|
|[`$mod`](https://www.mongodb.com/docs/manual/reference/operator/query/mod/#mongodb-query-op.-mod)|Performs a modulo operation on the value of a field and selects documents with a specified result.|
|[`$regex`](https://www.mongodb.com/docs/manual/reference/operator/query/regex/#mongodb-query-op.-regex)|Selects documents where values match a specified regular expression.|
|[`$text`](https://www.mongodb.com/docs/manual/reference/operator/query/text/#mongodb-query-op.-text)|Performs text search.<br><br>## NOTE<br><br>`$text` provides text query capabilities for self-managed (non-Atlas) deployments. For data hosted on MongoDB Atlas, MongoDB offers an improved full-text query solution, [Atlas Search.](https://www.mongodb.com/docs/atlas/atlas-search/)|
|[`$where`](https://www.mongodb.com/docs/manual/reference/operator/query/where/#mongodb-query-op.-where)|Matches documents that satisfy a JavaScript expression.|

### Geospatial[](https://www.mongodb.com/docs/manual/reference/operator/query/#geospatial "Permalink to this heading")

|Name|Description|
|---|---|
|[`$geoIntersects`](https://www.mongodb.com/docs/manual/reference/operator/query/geoIntersects/#mongodb-query-op.-geoIntersects)|Selects geometries that intersect with a [GeoJSON](https://www.mongodb.com/docs/manual/reference/glossary/#std-term-GeoJSON) geometry. The [2dsphere](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2dsphere/#std-label-2dsphere-index) index supports [`$geoIntersects`.](https://www.mongodb.com/docs/manual/reference/operator/query/geoIntersects/#mongodb-query-op.-geoIntersects)|
|[`$geoWithin`](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/#mongodb-query-op.-geoWithin)|Selects geometries within a bounding [GeoJSON geometry](https://www.mongodb.com/docs/manual/reference/geojson/#std-label-geospatial-indexes-store-geojson). The [2dsphere](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2dsphere/#std-label-2dsphere-index) and [2d](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2d/#std-label-2d-index) indexes support [`$geoWithin`.](https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/#mongodb-query-op.-geoWithin)|
|[`$near`](https://www.mongodb.com/docs/manual/reference/operator/query/near/#mongodb-query-op.-near)|Returns geospatial objects in proximity to a point. Requires a geospatial index. The [2dsphere](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2dsphere/#std-label-2dsphere-index) and [2d](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2d/#std-label-2d-index) indexes support [`$near`.](https://www.mongodb.com/docs/manual/reference/operator/query/near/#mongodb-query-op.-near)|
|[`$nearSphere`](https://www.mongodb.com/docs/manual/reference/operator/query/nearSphere/#mongodb-query-op.-nearSphere)|Returns geospatial objects in proximity to a point on a sphere. Requires a geospatial index. The [2dsphere](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2dsphere/#std-label-2dsphere-index) and [2d](https://www.mongodb.com/docs/manual/core/indexes/index-types/geospatial/2d/#std-label-2d-index) indexes support [`$nearSphere`.](https://www.mongodb.com/docs/manual/reference/operator/query/nearSphere/#mongodb-query-op.-nearSphere)|

### Array[](https://www.mongodb.com/docs/manual/reference/operator/query/#array "Permalink to this heading")

|Name|Description|
|---|---|
|[`$all`](https://www.mongodb.com/docs/manual/reference/operator/query/all/#mongodb-query-op.-all)|Matches arrays that contain all elements specified in the query.|
|[`$elemMatch`](https://www.mongodb.com/docs/manual/reference/operator/query/elemMatch/#mongodb-query-op.-elemMatch)|Selects documents if element in the array field matches all the specified [`$elemMatch`](https://www.mongodb.com/docs/manual/reference/operator/query/elemMatch/#mongodb-query-op.-elemMatch) conditions.|
|[`$size`](https://www.mongodb.com/docs/manual/reference/operator/query/size/#mongodb-query-op.-size)|Selects documents if the array field is a specified size.|

### Bitwise[](https://www.mongodb.com/docs/manual/reference/operator/query/#bitwise "Permalink to this heading")

|Name|Description|
|---|---|
|[`$bitsAllClear`](https://www.mongodb.com/docs/manual/reference/operator/query/bitsAllClear/#mongodb-query-op.-bitsAllClear)|Matches numeric or binary values in which a set of bit positions _all_ have a value of `0`.|
|[`$bitsAllSet`](https://www.mongodb.com/docs/manual/reference/operator/query/bitsAllSet/#mongodb-query-op.-bitsAllSet)|Matches numeric or binary values in which a set of bit positions _all_ have a value of `1`.|
|[`$bitsAnyClear`](https://www.mongodb.com/docs/manual/reference/operator/query/bitsAnyClear/#mongodb-query-op.-bitsAnyClear)|Matches numeric or binary values in which _any_ bit from a set of bit positions has a value of `0`.|
|[`$bitsAnySet`](https://www.mongodb.com/docs/manual/reference/operator/query/bitsAnySet/#mongodb-query-op.-bitsAnySet)|Matches numeric or binary values in which _any_ bit from a set of bit positions has a value of `1`.|

## Projection Operators[](https://www.mongodb.com/docs/manual/reference/operator/query/#projection-operators "Permalink to this heading")

|Name|Description|
|---|---|
|[`$`](https://www.mongodb.com/docs/manual/reference/operator/projection/positional/#mongodb-projection-proj.-)|Projects the first element in an array that matches the query condition.|
|[`$elemMatch`](https://www.mongodb.com/docs/manual/reference/operator/projection/elemMatch/#mongodb-projection-proj.-elemMatch)|Projects the first element in an array that matches the specified [`$elemMatch`](https://www.mongodb.com/docs/manual/reference/operator/projection/elemMatch/#mongodb-projection-proj.-elemMatch) condition.|
|[`$meta`](https://www.mongodb.com/docs/manual/reference/operator/aggregation/meta/#mongodb-expression-exp.-meta)|Projects the document's score assigned during the `$text` operation.<br><br>## NOTE<br><br>`$text` provides text query capabilities for self-managed (non-Atlas) deployments. For data hosted on MongoDB Atlas, MongoDB offers an improved full-text query solution, [Atlas Search.](https://www.mongodb.com/docs/atlas/atlas-search/)|
|[`$slice`](https://www.mongodb.com/docs/manual/reference/operator/projection/slice/#mongodb-projection-proj.-slice)|Limits the number of elements projected from an array. Supports skip and limit slices.|

## Miscellaneous Operators[](https://www.mongodb.com/docs/manual/reference/operator/query/#miscellaneous-operators "Permalink to this heading")

|Name|Description|
|---|---|
|[`$comment`](https://www.mongodb.com/docs/manual/reference/operator/query/comment/#mongodb-query-op.-comment)|Adds a comment to a query predicate.|
|[`$rand`](https://www.mongodb.com/docs/manual/reference/operator/query/rand/#mongodb-query-op.-rand)|Generates a random float between 0 and 1.|



### [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#projection)Projection

Specify a projection document to return only selective fields:

__id is true by default so you need to explicitly tell mongosh to not project_ id

[![Document Operation Demo Terminal Screenshot](https://res.cloudinary.com/practicaldev/image/fetch/s--n4UJj3P5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn.hashnode.com/res/hashnode/image/upload/v1689971869868/d2670481-659f-4c3d-9caa-b60c3e99f0c7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--n4UJj3P5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn.hashnode.com/res/hashnode/image/upload/v1689971869868/d2670481-659f-4c3d-9caa-b60c3e99f0c7.png)  

```
db.users.find({}, {name: 1, email: 1}) // only return name and email
```

### [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#sorting)Sorting

Pass a sort specifier to `sort()`:  

```
db.users.find({}).sort({age: -1}) // sort by age descending
db.users.find({}).sort({age: 1}) // sort by age ascending
```

### [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#limiting)Limiting

Limit results with `limit()`:  

```
db.users.find({}).limit(10) // only return 10 docs
```

### [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#pagination)Pagination

Use cursor for skipping and limiting:  

```
const cursor = db.users.find()
cursor.skip(10).limit(10) // skip 10, limit 10
```

There are many more querying capabilities - covered later!

## [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#updating-documents)Updating Documents

Use update operators like `$set` to update documents:  

```
db.users.update({name: "John"}, {$set: {age: 20}})
```

[![Document Operation Demo Terminal Screenshot](https://res.cloudinary.com/practicaldev/image/fetch/s--4r24zhnT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn.hashnode.com/res/hashnode/image/upload/v1689973772405/9b719ce9-7cb3-4304-9a57-9106d3d52420.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--4r24zhnT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_800/https://cdn.hashnode.com/res/hashnode/image/upload/v1689973772405/9b719ce9-7cb3-4304-9a57-9106d3d52420.png)

Common update operators:

- `$set` - Sets value of a field
    
- `$inc` - Increments value
    
- `$min`/`$max` - Updates if less/greater than current
    
- `$push`/`$pull` - Adds/removes from an array
    
- `$rename` - Renames a field
    

## [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#deleting-documents)Deleting Documents

To delete documents, use `deleteOne()` or `deleteMany()`:  

```
db.users.deleteMany({status: "inactive"})
```

## [](https://dev.to/mohitsinghchauhan/learn-mongodb-in-one-shot-ultimate-mongodb-guide-4k82#indexes)Indexes

==Advanced Topic Alert==

Indexes allow the MongoDB query engine to quickly find and sort documents by their indexed fields without having to scan every document in the collection.

For example, adding an index on the `name` field will allow fast lookups like:  

```
db.users.find({name: "John"})
db.users.find({name: {$gt: "A"}})  
db.users.find({}).sort({name: 1}) // sort by name ascending
```

Without an index on `name`, these queries would require a full collection scan which can be 100x or more slower on large collections. Indexes make a dramatic impact on performance.

To create an index:  

```
db.users.createIndex({name: 1}) // Ascending index
```

The index will be created in the background and does not block reads/writes.

**Some considerations when using indexes:**

- Indexes consume disk space and memory to store the indexed data efficiently.
    
- Adding indexes will slow down write operations like inserts and updates as the indexes also need to be updated.
    
- Use indexes judiciously on fields that are frequently queried or sorted on. Avoid over-indexing.
    
- Index types like text, geospatial provide additional query capabilities.
    
- Compound indexes can be created on multiple fields.
    

Summing Up, Indexes allow fast lookups and sorting of documents by indexed fields but also have storage overhead and impact write performance. Use indexes judiciously based on query patterns and system resources.